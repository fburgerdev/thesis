% theorem
\begin{mytheorem}[Rooted Homotopy Theorem]{suspension::homotopy}
    Let $\bb$ be a rooted microbundle over $B$ and $f, g: A \to B$ be two based maps.
    If there exists a homotopy $H: \cyl{A} \to B$ between $f$ and $g$ that leaves the base point fixed,
    then the two rooted microbundles $\ind{f}\bb$ and $\ind{g}\bb$ are rooted-isomorphic.
\end{mytheorem}

% foreword lemma
\begin{myparagraph}
    To proof this, need to show a `rooted version' of \intref{homotopy::lemma2}.
    
    First, note that 
    \[
        E(\ind{H}\bb\restr{\cyl{a_0}}) = E(\ind{\iota}(\ind{H}(\bb)))
        \cong E(\ind{(H \circ \iota)}\bb) = E(\ind{const_{b_0}}\bb).
    \]
    By applying \intref{induced::const}, we can consider $E(\ind{H}\bb\restr{\cyl{a_0}})$
    to be an open subset of $a_0 \times [0, 1] \times E(\bbb)$.

    Based on this, we can define an isomorphism-germ
    \[ \germdef{\overline{R}}{\ind{H}\bb\restr{\cyl{a_0}}}{\be{\cyl{a_0}}} \]
    by the representative
    \[ \overline{r}: \cyl{a_0} \times V \to \cyl{a_0} \times \R^n \]
    with
    \[ \overline{r}(a_0, t, v) = (a_0, t, \snd{r}(v) )\]
    where $r: V \to b_0 \times \R^n$ is a representative for $R$ with $V \sub E(\bbb)$ open.
    The representative $\overline{r}$ is a homeomorphism on its image
    because its component-wise the identity and $r$, which are both homeomorphisms on their image. 
\end{myparagraph}

% lemma
\begin{mylemma}{suspension::sharper}
    Let $\bb$ be a rooted microbundle over $B$ and
    let $H: \cyl{A} \to B$ be a map that leaves the base point fixed.
    Then there exists a neighborhood $V$ of $a_0$ together with an isomorphism-germ
    \[ \germ{\ind{H}\bb\restr{\cyl{V}}}{\be{\cyl{V}}} \]
    extending $\overline{R}$ (as defined above).
\end{mylemma}

% proof lemma
\begin{myproof}
    By applying \intref{homotopy::lemma2},
    it follows that there exists an isomorphism-germ
    \[ \germdef{Q}{\ind{H}\bb\restr{\cyl{V}}}{\be{\cyl{V}}} \]
    for a sufficiently small neighborhood $V$ of $a_0$.
    However $Q$ doesn't extend $R$ in general.

    To fix this, consider
    \[ \germdef{Q \circ \inv{\overline{R}}}{\be{\cyl{a_0}}}{\be{\cyl{a_0}}} \]
    represented by $\nu: U_\nu \to \cyl{a_0} \times \R^n$
    with $U_\nu \sub \cyl{a_0} \times \R^n$ open.

    Similar to the construction of $\overline{R}$, we can construct an isomorphism-germ
    \[ \germdef{P}{\be{\cyl{V}}}{\be{\cyl{V}}} \]
    extending $Q \circ \inv{\overline{R}}$ represented by
    \[ p(a, t, x) = (a, \nu(a_0, t, x)) \]
    considering $\nu(a_0, t, x) \in \I \times \R^n$.

    Restricted to $\be{\cyl{a_0}}$, $P$ agrees with $Q \circ \inv{\overline{R}}$ and thus
    \[
        \inv{Q} \circ P\restr{\be{\cyl{a_0}}}
        = (\inv{Q} \circ (Q \circ \inv{\overline{R}}))
        = ((\inv{Q} \circ Q) \circ \inv{\overline{R}})
        = \inv{\overline{R}}
    \]
    \[ \implies (\inv{P} \circ Q)\restr{\ind{H}\bb\restr{\cyl{a_0}}} = \overline{R}. \]
    Since $P$ and $Q$ are both isomorphism-germs,
    \[ \germdef{\inv{P} \circ Q}{\ind{H}\bb\restr{\cyl{V}}}{\be{\cyl{V}}} \]
    is an isomorphism-germ extending $\overline{R}$.
\end{myproof}

% proof theorem
\begin{myproof}[of the Rooted Homotopy Theorem]
    For $\ind{f}\bb$ and $\ind{g}\bb$ to be rooted-isomorphic,
    there needs to exist an isomorphism-germ
    \[ \germdef{F}{\ind{f}\bb}{\ind{g}\bb} \]
    extending $\inv{R_g} \circ R_f = \inv{R} \circ R = id_\bb$.

    We construct this isomorphism-germ as in \intref{chapter::homotopy},
    by taking a bundle-germ
    \[ \germ{\ind{H}\bb}{\ind{H}\bb\restr{\cylup{A}}} \]
    using \intref{homotopy::lemma3} and restricting it to $\ind{H}\bb\restr{\cyldown{A}}$.

    So the only thing to do is to modify \intref{homotopy::lemma3} such a that
    \[ \germ{\ind{H}\bb\restr{\cyldown{a_0}}}{\ind{H}\bb\restr{\cyldown{b_0}}} \]
    extends the identity germ if we consider $a_0 \times E(\bbb) = b_0 \times E(\bbb)$.

    This is achieved by taking a locally finite open cover $\coll{V_\alpha}$
    of $A$ as in \intref{homotopy::lemma3}, removing the base point $a_0$ in every set
    and adding the set $V$ obtained from \intref{suspension::sharper}.
    Since $a_0 \in V$, the resulting collection is still a locally finite open cover of $A$.

    We continue with the proof like normal.
    Note that $\lambda_V(a_0) = 1$,
    since $\lambda_\alpha(a_0) = 0$ because we removed $a_0$ from every other set.

    Lastly, we construct the extension $R_V$ for $r_v$ like in \intref{chapter::homotopy},
    but instead of taking an arbitrary trivialization $E(\ind{H}\restr{A_\alpha}) \cong A_\alpha \times \R^n$
    for construction we use a representative $r$ for the bundle-germ constructed in \intref{suspension::sharper}.
    
    This has the effect that the mapping
    \[
        E(\ind{H}\bb\restr{A_V}) \xto{r}
        A_V \times \R^n \xto{r_V \times id} (A_V \cap A'_V) \times \R^n
        \xto{\inv{r}} E(\ind{H}\bb\restr{A_V \cap A'_V})
    \]
    is the identity on $\ind{H}\bb\restr{\cyldown{a_0}}$ if we consider $a_0 \times E(\bbb) = b_0 \times E(\bbb)$.

    This is exactly what we wanted and since
    every other $R_\alpha$ leaves $\ind{H}\bb\restr{\cyldown{a_0}}$ unaffected
    because $r_\alpha(a_0, t) = (a_0, \max(\lambda_\alpha(t), t)) = (a_0, t)$.

    Therefore, the pieced together bundle-germ
    is also the identity on $\ind{H}\bb\restr{\cyldown{a_0}}$, completing the proof.
\end{myproof}